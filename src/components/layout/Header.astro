---
import { Icon } from "astro-icon/components";
const currentPath = Astro.url.pathname;
---

<header
  class="fixed top-0 left-0 z-50 h-20 w-full rounded-xl bg-none px-8 py-3"
>
  <div
    class="border-muted bg-background relative flex h-full items-center rounded-2xl border px-8"
  >
    <h4>
      {
        currentPath.split("/")[1]
          ? currentPath.split("/")[1].slice(0, 1).toUpperCase() +
            currentPath.split("/")[1].slice(1)
          : "Bernardusz"
      }
    </h4>
    <nav class="absolute left-1/2 flex -translate-x-1/2 gap-6">
      <a class="link-primary" href="/"> Home </a>
      <a class="link-primary" href="/about"> About</a>
      <a class="link-primary" href="/projects">Projects</a>
      <a class="link-primary" href="/achievements"> Achievments</a>
      <a class="link-primary" href="/services">Services</a>
      <a class="link-primary" href="/contact"> Contact</a>
    </nav>
    <button id="toggleMode" class="ml-auto">
      <Icon name="tabler:sun" size={24} class="flex dark:hidden" />
      <Icon name="tabler:moon" size={24} class="hidden dark:flex" />
    </button>
  </div>
</header>

<script>
  const html = document.documentElement;
  const toggle = document.getElementById("toggleMode") as HTMLElement | null;

  function setDark() {
    html.classList.add("dark");
    localStorage.setItem("lightOrDark", "dark");
  }
  function setLight() {
    html.classList.remove("dark");
    localStorage.setItem("lightOrDark", "light");
  }

  function toggleMode() {
    if (html.classList.contains("dark")) {
      setLight();
    } else {
      setDark();
    }
  }
  toggle?.addEventListener("click", toggleMode);
</script>
